<bng-header>
  <mat-toolbar class="mat-toolbar mat-toolbar-single-row">
    <button
      class="mat-focus-indicator mat-icon-button mat-button-base ng-star-inserted"
      (click)="volver()"
    >
      <span class="mat-button-wrapper">
        <mat-icon>arrow_back</mat-icon>
      </span>
      <div
        matripple
        class="mat-ripple mat-button-ripple mat-button-ripple-round"
      ></div>
      <div class="mat-button-focus-overlay"></div>
    </button>
    <span>{{'resource.licitacio' | translate}}</span>
    <span class="toolbar-fill"></span>
  </mat-toolbar>
</bng-header>

<div *ngIf="licitacio" class="mat-elevation-z4 page-like">
  <h2 class="mat-display-1" style="margin-bottom:16px">
    {{'resource.licitacio'|translate}}
  </h2>
  <ng-container *ngTemplateOutlet="fieldsCard1"></ng-container>
  <div *ngIf="tDocs.length > 0">
    <h2 class="mat-display-1" style="margin-top: 16px;margin-bottom:16px;">
      {{'resource.licitacio.field.titolCardDoc'|translate}}
    </h2>
    <ng-container *ngTemplateOutlet="fieldsCard2"></ng-container>
  </div>
</div>

<ng-template #fieldsCard1>
  <table *ngIf="tLic.length" mat-table [dataSource]="tLic">
    <ng-container matColumnDef="label">
      <td
        mat-cell
        *matCellDef="let element"
        style="width: 30%; font-weight: bold; background-color: #f4ecf7;"
      >
        {{element.label | translate}}
      </td>
    </ng-container>

    <ng-container matColumnDef="descripcio">
      <td
        mat-cell
        *matCellDef="let element"
        style="width: 70%; padding-left: 1em;"
      >
        <a
          *ngIf="element.label == 'licitacio.camp.url'; else desc"
          href="{{element.descripcio}}"
          target="_blank"
        >
          {{element.descripcio}}
        </a>
        <ng-template #desc>
          {{element.descripcio}}
        </ng-template>
      </td>
    </ng-container>

    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>
</ng-template>

<ng-template #fieldsCard2>
  <table
    *ngIf="tDocs.length"
    mat-table
    [dataSource]="tDocs"
    style="width: 90%;"
  >
    <ng-container matColumnDef="nom">
      <th
        mat-header-cell
        *matHeaderCellDef
        style="font-weight: bold; font-size: large;"
      >
        {{'licitacio.camp.DocNom' | translate}}
      </th>
      <td mat-cell *matCellDef="let element" style="width: 30%;">
        {{element.nom}}
      </td>
    </ng-container>

    <ng-container matColumnDef="tipus">
      <th
        mat-header-cell
        *matHeaderCellDef
        style="font-weight: bold; font-size: large;"
      >
        {{'licitacio.camp.DocTipus' | translate}}
      </th>
      <td mat-cell *matCellDef="let element" style="width: 30%; ">
        {{element.tipus}}
      </td>
    </ng-container>

    <ng-container matColumnDef="uri">
      <th
        mat-header-cell
        *matHeaderCellDef
        style="font-weight: bold; font-size: large;"
      >
        {{'licitacio.camp.DocLinkDescarraga' | translate}}
      </th>
      <td
        mat-cell
        *matCellDef="let element"
        style="width: 30%; padding-left: 1em;"
      >
        <a href="{{element.uri}}" target="_blank">
          <mat-icon>cloud_download</mat-icon>
        </a>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumnsDoc"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumnsDoc;"></tr>
  </table>
</ng-template>

<style>
  .page-like {
    margin: 1em;
    padding: 2em;
    background-color: white;
  }
</style>
