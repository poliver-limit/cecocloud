<bng-header>
  	<button mat-icon-button (click)="volver()">
  		<mat-icon>arrow_back</mat-icon>
  	</button>
    <span>{{'resource.licitacio' | translate}}</span>
</bng-header>

<div *ngIf="licitacio" class="mat-elevation-z4 page-like">
  <h2 class="mat-display-1" style="margin-bottom:16px">
    {{'resource.licitacio'|translate}}
  </h2>
  <ng-container *ngTemplateOutlet="fieldsCard1"></ng-container>
  <div *ngIf="tDocs.length > 0">
    <h2 class="mat-display-1" style="margin-top: 16px;margin-bottom:16px;">
      {{'resource.licitacio.field.titolCardDoc'|translate}}
    </h2>
    <ng-container *ngTemplateOutlet="fieldsCard2"></ng-container>
  </div>
</div>

<ng-template #fieldsCard1>
  <table *ngIf="tLic.length" mat-table [dataSource]="tLic" style="width:100%">
    <ng-container matColumnDef="label">
      <td
        mat-cell
        *matCellDef="let element"
        style="width: 30%; background-color: #f4ecf7;"
      >
        {{element.label | translate}}
      </td>
    </ng-container>

    <ng-container matColumnDef="descripcio">
      <td
        mat-cell
        *matCellDef="let element"
        style="width: 70%; padding-left: 1em;"
      >
        <a
          *ngIf="element.label == 'licitacio.camp.url'; else desc"
          href="{{element.descripcio}}"
          target="_blank"
        >
          {{element.descripcio}}
         
        </a> 
        <ng-template #desc>
          {{element.descripcio}}
        </ng-template>
      </td>
    </ng-container>

    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>
</ng-template>

<ng-template #fieldsCard2>
  <table
    *ngIf="tDocs.length"
    mat-table
    [dataSource]="tDocs"
    style="width: 100%;"
  >
    <ng-container matColumnDef="nom">
      <th
        mat-header-cell
        *matHeaderCellDef
      >
        {{'licitacio.camp.DocNom' | translate}}
      </th>
      <td mat-cell *matCellDef="let element">
        {{element.nom}}
      </td>
    </ng-container>

    <ng-container matColumnDef="tipus">
      <th
        mat-header-cell
        *matHeaderCellDef
      >
        {{'licitacio.camp.DocTipus' | translate}}
      </th>
      <td mat-cell *matCellDef="let element">
        {{element.tipus}}
      </td>
    </ng-container>

    <ng-container matColumnDef="uri">
      <th
        mat-header-cell
        *matHeaderCellDef
      >
        {{'licitacio.camp.DocLinkDescarraga' | translate}}
      </th>
      <td
        mat-cell
        *matCellDef="let element"
        style="padding-left: 1em;"
      >
        <a href="{{element.uri}}" target="_blank">
          <mat-icon>cloud_download</mat-icon>
        </a>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumnsDoc"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumnsDoc;"></tr>
  </table>
</ng-template>

<style>
  .page-like {
    margin: 1em;
    padding: 2em;
    background-color: white;
  }
</style>
